<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Two Way Switch - eYRC 2021-22: Soil Monitoring Bot (SM)</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <!-- 
        <link rel="icon" href="../favicon.svg">
         -->
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="../index.html">Table of contents</a></li><li class="chapter-item "><a href="../prerequisites/prereq_intro.html">Prerequisites</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../prerequisites/prerequisites.html">Basics of Digital Electronics</a></li></ol></li><li class="chapter-item expanded "><a href="../basic_resources/basic.html">Basic Resources</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../basic_resources/TWS.html" class="active">Two Way Switch</a></li><li class="chapter-item "><a href="../basic_resources/RCA.html">Ripple Carry Adder</a></li><li class="chapter-item "><a href="../basic_resources/7seg.html">Seven Segment Display</a></li><li class="chapter-item "><a href="../basic_resources/ALU.html">Arithmetic Logic Unit</a></li><li class="chapter-item "><a href="../basic_resources/USR.html">Universal Shift Register</a></li></ol></li><li class="chapter-item "><a href="../advanced.html">Advanced Resources</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <!-- <html>
	<head>
	<style>
		
	@media only screen and (max-width: 600px) {
	  .eyrc_ckt{
			display:none;
		}
	}

	</style>
	</head>
	<body>
		<div>
		<center></center>
			<div style="display:flex; justify-content:space-between;padding:10px;padding-top:0">
				<div >
					<img src="http://mooc.e-yantra.org/img/eYantra_logo.svg" alt="e-yantra_logo" height="40px" style="padding:10px 15px;" />
				</div>
				<div>
					<img src="https://raw.githubusercontent.com/kalindkaria/typora-md-assets/master/maze_bot/assets/eyrc-header.svg" height="80px"  class="eyrc_ckt">
				</div>
				<div style="font-weight:900;font-size:20px;text-align:center;padding:10px 15px">
					Robotics Competition<br>
					2020-21
				</div>
			</div>
			
		</div>
	</body>
</html>


 -->
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div style="width:100%">
                        <html>
	<head>
	<style>
		
	@media only screen and (max-width: 600px) {
	  .eyrc_ckt{
			display:none;
		}
	}

	</style>
	</head>
	<body>
		<div>
		<center></center>
			<div style="display:flex; justify-content:space-between;padding:10px;padding-top:0">
				<div >
					<img src="http://mooc.e-yantra.org/img/eYantra_logo.svg" alt="e-yantra_logo" height="40px" style="padding:10px 15px;" />
				</div>
				<div>
					<img src="https://raw.githubusercontent.com/kalindkaria/typora-md-assets/master/maze_bot/assets/eyrc-header.svg" height="80px"  class="eyrc_ckt">
				</div>
				<div style="font-weight:900;font-size:20px;text-align:center;padding:10px 15px">
					Robotics Competition<br>
					2020-21
				</div>
			</div>
			
		</div>
	</body>
</html>



                    </div>
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">eYRC 2021-22: Soil Monitoring Bot (SM)</h1>

                    <div class="right-buttons">
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- <center><img src="http://mooc.e-yantra.org/img/eYantra_logo.svg" alt="e-yantra_logo" style="scale:75%;" /></center> -->
<style>
.back{
	position: fixed;
	width: 250px;
	height: 250px;
	top: 50%;
	left: 50%;
    margin-top: auto; 
    margin-left: auto; 
	opacity: 0.15;
    z-index: -1;
	}
</style>
<!-- <img src="http://mooc.e-yantra.org/img/EyantraLogoMini.png" class="back"> -->
<center><u><h2><a class="header" href="#two-way-switch" id="two-way-switch"> Two Way Switch </a></h2></u></center>
<center><h2><a class="header" href="#1-introduction" id="1-introduction"> 1. Introduction </a></h2></center>
<hr />
<h3><a class="header" href="#11-what-is-a-two-way-switch-" id="11-what-is-a-two-way-switch-"> 1.1 What is a Two Way Switch ?</a></h3>
<p align="justify" class="main">A two way switch can be explained using a simple example. Consider a room with
two switches and one bulb. Now, If both the switches are in OFF state or ON state
the bulb will not glow. But, if either of the two switch is ON the bulb will glow.
If we have to relate this with digital electronics, the logic can be realised using an
X-OR gate.</p>
<h3><a class="header" href="#12-x-or-gate" id="12-x-or-gate"> 1.2 X-OR Gate</a></h3>
XOR gate (pronounced as Exclusive OR) is a digital logic gate that gives a <b>TRUE</b>
(1 or HIGH) output when odd number of inputs are <b>TRUE.</b>
<p align="center">
  <img src="images/TWS/img1.png", width =400, height=150>
</p>
<center>Figure 1: Symbol</center>
<p align="center">
  <img src="images/TWS/img2.png", width =300, height=300>
</p>
<center>Figure 2: Truth Table</center>
<center><h2><a class="header" href="#2-circuit-diagram" id="2-circuit-diagram"> 2. Circuit Diagram </a></h2></center>
<hr />
<blockquote>
<p><em><strong>Note:</strong> LED does not conduct in both direction. This circuit is just a representation of the logic.</em></p>
</blockquote>
<p align="center">
  <img src="./images/TWS/new circuit.png">
</p>
<center>Figure 3: Two way switch Circuit Diagram.</center><br />
<center><h2><a class="header" href="#3-code-in-verilog" id="3-code-in-verilog"> 3. Code in Verilog </a></h2></center>
<hr />
<h3><a class="header" href="#31-verilog-codertl-description" id="31-verilog-codertl-description"> 3.1 Verilog Code(RTL Description)</a></h3>
<center><iframe id="ytplayer" type="text/html" width="640" height="360"
  src="https://www.youtube.com/embed/Z5gHCHcOVyE?autoplay=1&origin=http://example.com"
  frameborder="0"></iframe></center>
<p>Dataflow Modelling:</p>
<pre><code class="language-verilog">//Verilog code in Dataflow style
module TWS(
input s1,s2, //Define two Inputs pins
output z); //Define one output pin
assign z = (s1^s2); //XOR the 2 input pins(s1,s2) and assign

//the output to the output pin(X1)

endmodule
</code></pre>
<p>Behavioural Modelling:</p>
<pre><code class="language-verilog">//Verilog code in Behavioural style
module TWS(
input s1,s2, //Define two inputs(switches)
output reg z //Define the output pin
);
always @ (s1,s2) //Every time the input changes, the output

//is to be updated

begin
if (s1==s2) //if both switches are in same position,

//output is LOW
z = 0;
else
z=1; //if the position of switches are not equal,
//output is HIGH

end
endmodule
</code></pre>
<h3><a class="header" href="#32-testbench-codeverilog" id="32-testbench-codeverilog"> 3.2 Testbench Code(Verilog)</a></h3>
<pre><code class="language-verilog">module TWS_tb;
reg s1;reg s2; //define input
wire z; //define output
TWS_Behavioural uut(.s1(s1),.s2(s2),.z(z)); //Map testbench ports with

//DUT ports

initial begin
s1 = 0; s2 = 0;#100; //different combinations of input
s1 = 0; s2 = 1;#100;
s1 = 1; s2 = 0;#100;
s1 = 1; s2 = 1;#100;
#100;
end
endmodule
</code></pre>
<center><h2><a class="header" href="#4-implementing-on-quartus" id="4-implementing-on-quartus"> 4. Implementing on Quartus</a></h2></center>
<hr />
<p align="justify" class="main">To Implement the design in Quartus Software, follow these steps: (For more detailed information on the following steps, refer <b>Getting Started with Quartus</b> section from Task 0)</p>
<blockquote>
<p><em><strong>Note:</strong> For this demonstration, the language used is Verilog HDL.</em><br /></p>
</blockquote>
<p><b>Family:</b> Cyclone IV E; <b>Chip Name:</b> EP4CE22F17C6</p>
<ol>
<li> Start a new project in Quartus Lite software</li>
<p align="center">
  <img src="./images/TWS/TWS new1.png">
</p>
<li><p align="justify" class="main">Create a new Verilog or VHDL file.Here we create a Verilog file for demonstration. Same procedure can be followed to VHDL file.</p></li>
<p align="center">
  <img src="./images/TWS/Implement on Quartus/img2.png">
</p>
<li><p align="justify" class="main">Type the above main code in this file and make sure that the Module name
and the file name is same.</p></li>
<blockquote>
<p><em><strong>Note:</strong> We have used the Dataflow Verilog code for this demonstration.</em></p>
</blockquote>
<p align="center">
  <img src="./images/TWS/twsnew3.png">
</p>
<li> Go to <b>Project → Set as Top-Level Entity</b>.</li>
<p align="center">
  <img src="./images/TWS/SETAS.png">
</p>
<li>Go to <b>Processing → Start Compilation</b>.</li>
<p align="center">
  <img src="./images/TWS/TWSCOM.png">
</p>
<li>After successful compilation, you will see these Green check marks.</li>
<p align="center">
  <img src="./images/TWS/check_marks.png">
</p>
</ol>
<center><h2><a class="header" href="#5-rtl-circuit-of-the-implemented-design" id="5-rtl-circuit-of-the-implemented-design"> 5. RTL Circuit of the implemented design </a></h2></center>
<hr />
<p align="justify" class="main">The below two figures show the RTL Circuit of the two different types of modelling (Dataflow and behavioural). As it can be seen, both types of modelling resulted
in the same type of design. Although might not be true for more complex designs (Behavioural modelling results in a more complex circuit than Dataflow or
Structural), intelligent and smart behavioural design can lead to really well optimised circuits.</p>
<p><b>Steps to get RTL circuit.</b></p>
<ol>
<li> Go to <b>Tools → Netlist Viewers → RTL Viewer</b>.</li>
<p align="center">
  <img src="./images/TWS/TWSRTL1.png">
</p>
<li> The below figure shows the equivalent RTL circuit in both Dataflow and Behavioural modelling styles.</li>
<p align="center">
  <img src="./images/TWS/TWSRTL2.png">
</p>
<center>Figure 4: Dataflow modelling</center><br />
<p align="center">
  <img src="./images/TWS/TWSRTL2.png">
</p>
<center>Figure 5: Behavioural modelling</center><br />
<ol>
<center><h2><a class="header" href="#6-implementing-on-modelsim" id="6-implementing-on-modelsim"> 6. Implementing on Modelsim </a></h2></center>
<hr />
<p align="justify" class="main">The TestBench shown here is a Verilog TestBench. For more detailed procedure on using ModelSim, Refer <b>Getting Started with Quartus</b> section from Task 0.</p>
<ol>
<li> <p align="justify" class="main">Create a <b>NEW</b> Verilog  file in Quartus&nbsp; Prime. Type in the TestBench code
provided in this document and <b>SAVE</b> the file with the same name as the
module name.</p></li>
<p align="center">
  <img src="./images/TWS/twstbadd.png">
</p>
<li>Go to <b>Assignments→Settings</b>.</li>
<p align="center">
  <img src="./images/TWS/tws4.png">
</p>
<li><p align="justify" class="main"> Navigate  to <b>Simulation</b> under <b>EDA Tool Settings</b>. Set the language as
Verilog HDL.  Select <b>Compile Test Bench</b> and then click on <b>Test Benches</b>.</p></li>
<p align="center">
  <img src="./images/TWS/tws5.png">
</p>
<li>Click on <b>New</b>, this opens another dialogue box.</li>
<p align="center">
  <img src="./images/TWS/tws6.png">
</p>
<li><p align="justify" class="main">Now type in the testbench name(In this design , its <b>tb_TWS</b>). Now click on
the highlighted browse button. Find the testbench file(it can be found in the
project directory) and  click on <b>Open</b>. Now click on <b>Add</b>,then <b>OK</b>.</p></li>
<p align="center">
  <img src="./images/TWS/tws7.png">
</p>
</ol>
<p><b>Functional Simulation using NativeLink Feature</b></p>
<ol>
<li><p align="justify" class="main">Go to menu <b>Processing → Start → Start Analysis & Elaboration</b>. After
this click on <b>Start Analysis & Synthesis</b> on the same drop box.</p></li>
<p align="center">
  <img src="./images/TWS/tws8.png">
</p>
<li><p align="justify" class="main">Go to menu <b>Tools → Run Simulation Tool → RTL Simulation</b> to
automatically run the EDA simulator(ModelSim-Altera) and to compile all
necessary design files.</p></li>
<p align="center">
  <img src="./images/TWS/simu5.png">
</p>
<li><p align="justify" class="main">Finally ModelSim-Altera tool  opens up with simulated waveform. click on
<b>Run all</b> icon on the tool box to display the waveform.</p></li>
</ol>
<center><h2><a class="header" href="#7-testing-the-design" id="7-testing-the-design"> 7. Testing the Design </a></h2></center>
<hr />
<p align="justify" class="main">
What you see below is the simulation&nbsp; waveform obtained in ModelSim. Consider
the Verilog design, from the waveform, we can see that when <b>s1 = 0</b> and <b>s2 = 0</b>
the output <b>z = 0</b>. When <b>s1 = 0</b> and <b>s2 = 1</b> the output <b>z = 1</b>. When <b>s1 = 1</b> and <b>s2 = 0</b> the output 
<b>z = 1</b>. When <b>s1 = 1</b> and <b>s2 = 1</b> the output <b>z= 0</b>. This is the logic of a XOR Gate. The same can be observed in the VHDL
design.Hence the design has been verified.</p>
<h3><a class="header" href="#71-simulation-waveform-of-the-verilog-design" id="71-simulation-waveform-of-the-verilog-design"> 7.1 Simulation waveform of the Verilog Design </a></h3>
<p align="center">
  <img src="./images/TWS/simulation_waveform_verilog/Simulation_waveform.png">
</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../basic_resources/basic.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../basic_resources/RCA.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../basic_resources/basic.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../basic_resources/RCA.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        
        <!-- Google Analytics Tag -->
        <script type="text/javascript">
            var localAddrs = ["localhost", "127.0.0.1", ""];

            // make sure we don't activate google analytics if the developer is
            // inspecting the book locally...
            if (localAddrs.indexOf(document.location.hostname) === -1) {
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-145861739-2', 'auto');
                ga('send', 'pageview');
            }
        </script>
        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
