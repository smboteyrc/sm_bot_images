<style>
.back{
	position: fixed;
	width: 300px;
	height: 300px;
	top: 50%;
	left: 50%;
    margin-top: auto; 
    margin-left: auto; 
	opacity: 0.05;
	}
.center {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 50%;
}
h1 {
  text-align: center;
}
p.date {
  text-align: right;
}
p.main {
  text-align: justify;
}

</style>

<!-----------------------------------------------------------START-------------------------------------------------------------->

<center><h1>B. Hardware Testing</h1></center>
<hr>

<h3>Component list :</h3>

|Component|Specification|Datasheet|
| ---- | ---- | ---- |
|De0-Nano|2-pin external power header (3.6-5.7V)|[De0-Nano](https://www.terasic.com.tw/cgi-bin/page/archive_download.pl?Language=English&No=593&FID=75023fa36c9bf8639384f942e65a46f3)|
|N20 Motors|6V-600RPM|-|
|L9110s Motor Driver|Supply voltage: 2.5-12V, maximum operating current of 0.8A|[L9110s](https://www.elecrow.com/download/datasheet-l9110.pdf)|
|2S li-ion battery|7.4 V|-|
|Line Follower Sensor|3 channel|-|
|Xbee s2c Module|Supply voltage: 2.1-3.3V, operating Current: 33-45mA|[xbee s2c](https://www.digi.com/resources/documentation/digidocs/pdfs/90002002.pdf)|
|Color Sensor (TCS3200)|Supply voltage: 2.7-5.5 V|[TCS3200](https://www.mouser.com/catalog/specsheets/tcs3200-e11.pdf)|
|USB to UART module (FT232RL)|3.3V|[FT232RL](https://5.imimg.com/data5/XL/VE/MY-1833510/ft232rl-usb-to-ttl-5v-3-3v-convertor.pdf)|
|Level Shifter|5V to 3.3V Bidirectional|[Level Shifter](https://learn.sparkfun.com/tutorials/bi-directional-logic-level-converter-hookup-guide/all)|
|Potentiometer|10K ohm|-|
|Voltage regulator (AMS1117)|Input : 6.5V – 12V, Output : 5V, 800mAh|-|
|LEDs|RGB (Common anode)|-|


<h3>how does the component look like?</h3>
<ul>
<li> <u><a href="./arena/SM_Theme_Component_checklist_and_how_does_the_component_look_like.pdf" download>Click here</a></u> to download the checklist.</li>



<h3>Important :</h3>
<ol>
<li><p align="justify" class="main">Teams should have a Digital Multimeter(DMM), breadboard, soldering iron and solder wire before continuing with this task.</p></li>
<li><p align="justify" class="main">Read the datasheet of all components before using them.</p></li>
<li><p align="justify" class="main">Make sure to connect correct input voltage to avoid damaging the components.</p></li>
<li><p align="justify" class="main">If any component gets damaged due to any reason, then the team has to arrange replacement component themselves. If team fails to arrange replacement, then team might not be able to continue in the competition.</p></li>
</ol>

<!-----------------------------------------------------------Power Supply-------------------------------------------------------------->

<center><h1>Power Supply</h1></center>
<p align="justify" class="main">The battery provided in the kit is rated 7.4V, but most of the components in the kit work at 5V. So, we need to convert 7.4V to 5V. We use AMS1117 based voltage regulator whose input will be connected to the 7.4V battery. Red wire of the battery is connected to 'Vin+' input and black to 'Vin-' input of voltage regulator. Use the provided connector for the battery. A switch is also provided in the kit to turn on or off the supply.
Then using a DMM team can check output voltage. Note that the output voltage may not be exactly 5V but will be close to 5V with tolerance of ±0.5V.</p>  

<p align="center">
  <img src="hardware/Images/power.jpg">
</p>  

[Above image can be downloaded from <a href="./hardware/Images/power.jpg">here.</a>]

<p align="justify" class="main">A 9V adapter is provided in the kit to charge the battery. When using the battery do not overcharge it and also do not over-discharge it. Maintain the battery voltage between 7.4V to 7V and hence battery should be constantly monitored with DMM. Battery can be charged by connecting 9V adapter pin to the corresponding connector on the battery.</p> 

<!-----------------------------------------------------------1. Testing De0-Nano-------------------------------------------------------------->

<center><h1>1. Testing De0-Nano Board</h1></center>
<p align="justify" class="main">You can test De0-Nano board by powering it on and uploading code to it. De0-Nano must be powered with 5V supply on external power pins (Refer Datasheet).</p> 

> *__Note : De0-Nano board operates a 3.3V hence extra precautions must be taken when connecting any I/O to the board. Voltage above 3.3V applied to it's I/O pins will kill the board, however 5V input can be connected to external power pins as mentioned previously.__*

<p align="justify" class="main"><a href="./pin_assignment.mdown">Pin Assignment</a> section has been enabled in Task 0 so you can refer that to upload code to De0-Nano board.</p>

<p align="justify" class="main"><b>Code files</b> can be downloaded from <a href="./hardware/Codes/1_Testing_De0_Nano.zip">here.</a> Upload the .sof file to De0-Nano board and check the output.</p>

<b>Expected Output : </b>

<p align="center">
  <video width="640" height="360" controls loop muted>
    <source src="hardware/Videos/blink.mp4" type="video/mp4">
  </video>
</p>

<!-----------------------------------------------------------2. Testing RGB LED-------------------------------------------------------------->
<center><h1>2. Testing RGB LED</h1></center>

<p align="center">
  <img src="hardware/Images/rgb_led.jpg">
</p>

<p align="justify" class="main">RGB LEDs provided in the kit are common anode type. Refer above image for pin description (the longest pin is the common anode). <b>Do note that for using LEDs resistors must be used compulsorily to limit the current</b>. Four resistors are also provided in the kit. 
Now to test RGB LEDs connect each LED (one at a time) as shown in below image. Upload code provided and check the output.</p> 

<b>Code files</b> can be downloaded from <a href="./hardware/Codes/2_Testing_RGB_LED.zip">here.</a>

<b>Connections :</b>

|Pin|Connection|
|---|----------|
|Common Anode|GPIO-0 Pin 29 (3.3V) **via Resistor**|
|R|GPIO-0 Pin 36 (GPIO_029)|
|G|GPIO-0 Pin 38 (GPIO_031)|
|B|GPIO-0 Pin 40 (GPIO_033)|

<p align="center">
  <img src="hardware/Images/rgb.jpg">
</p> 

[Above image can be downloaded from <a href="./hardware/Images/rgb.jpg">here.</a>]

<b>Expected Output : </b>

<p align="center">
  <video width="640" height="360" controls loop muted>
    <source src="hardware/Videos/rgb.mp4" type="video/mp4">
  </video>
</p>

<!-----------------------------------------------------------3. Testing FT232RL & Xbee Modules-------------------------------------------------------------->
<center><h1>3. Testing FT232RL & Xbee Modules</h1></center>


<p align="justify" class="main">Before interfacing FT232RL USB to UART module check that the jumper is connected to 3.3V as shown in below image. If it is connected to 5V then remove it and connect it to 3.3V as shown below.</p>

<p align="center">
  <img src="hardware/Images/ftdi.jpg">
</p>

<p align="justify" class="main">Now to test FT232RL USB to UART module make connections as shown below. Upload code provided and check the output. FT232RL USB to UART module and De0-Nano board use same USB cable and there is one such cable in the kit. Hence upload <b>.jic</b> file to De0-Nano board which is non volatile and then use the same cable to connect FT232RL USB to UART module to PC/Laptop USB port.</p>

<b>Code files</b> can be downloaded from <a href="./hardware/Codes/3_Testing_Xbee.zip">here.</a>

<b>Connections :</b>

|Pin|Connection|
|---|----------|
|VCC|GPIO-0 Pin 29 (3.3V)|
|GND|GPIO-0 Pin 30 (GND)|
|Rx|GPIO-0 Pin 40 (GPIO_033)|

<p align="center">
  <img src="hardware/Images/ftdi_con.jpg">
</p>

[Above image can be downloaded from <a href="./hardware/Images/ftdi_con.jpg">here.</a>]

<b>Expected Output : </b>

<p align="center">
  <img src="hardware/Images/ftdi_op.PNG">
</p>

<p align="justify" class="main">Terminal program used in above image is <a href="http://www.der-hammer.info/pages/terminal.html">hterm.</a> Make sure to select correct COM port and Baud Rate, refer above image for all settings.</p>

<p align="justify" class="main">Now to test Xbee module same code is used but first Xbee modules must be configured. This <a href="https://www.youtube.com/watch?v=cf3RLBg4t5s">tutorial</a> can be followed to configure Xbee modules. 
It is important to select <b>115200</b> baud rate while configuring and also it is recommended to configure the modules for point to point communication.</p>

<b>Xbee Module Pin-out :</b>

<p align="center">
  <img src="hardware/Images/xbee_pinout.jpg">
</p>

<b>Connections :</b>

|Pin|Connection|
|---|----------|
|VCC|GPIO-0 Pin 29 (3.3V)|
|GND|GPIO-0 Pin 30 (GND)|
|Rx|GPIO-0 Pin 40 (GPIO_033)|

<b>The second module is connected to PC/Laptop via USB.</b>

<p align="center">
  <img src="hardware/Images/xbee.jpg">
</p>

[Above image can be downloaded from <a href="./hardware/Images/xbee.jpg">here.</a>]

<b>Expected Output :</b> Same as above.

<!-----------------------------------------------------------4. Testing Motors-------------------------------------------------------------->

<center><h1>4. Testing Motors</h1></center>

<b>Component and its use :</b>

|Component|Use|
|---------|---|
|Voltage Regulator|To supply 5V|
|Motor Driver L9110s|To provided proper voltage and current to motors|
|Level Shifter|To convert 3.3V output of De0-Nano to 5V for motor driver|


<b>Connections :</b>

<p align="center">
  <img src="hardware/Images/motors.png">
</p>

[Above image can be downloaded from <a href="./hardware/Images/motors.png">here.</a>]

|5V Regulator|Connection |L9110  |Connection|Level Shifter|Connection|
|------------|-----------|-------|----------|-------------|----------|
|Vin+        |Battery +ve|MOTOR A|1st Motor |HV1          |B-1A      |
|Vin-        |Battery -ve|MOTOR B|2nd Motor |HV2          |B-1B      |
|            |           |VCC    |+5V       |HV           |+5V       |
|            |           |GND    |GND       |GND          |GND       |
|            |           |A-1A   |HV3(Level Shifter)|HV3  |A-1A      |
|            |           |A-1B   |HV4(Level Shifter)|HV4  |A-1B      |
|            |           |B-1A   |HV1(Level Shifter)|LV1  |GPIO-0 Pin 34 (GPIO_027)|
|            |           |B-1B   |HV2(Level Shifter)|LV2  |GPIO-0 Pin 36 (GPIO_029)|
|            |           |       |                  |LV   |3.3V (De0-Nano)|
|            |           |       |                  |GND  |GND(De0-Nano)  |
|            |           |       |                  |LV3  |GPIO-0 Pin 38 (GPIO_031)|
|            |           |       |                  |LV4  |GPIO-0 Pin 40 (GPIO_033)|

To test the motors, make connections as described above then upload code and verify output.

<b>Code files</b> can be downloaded from <a href="./hardware/Codes/4_Testing_Motors.zip">here.</a>

<b>Expected Output : </b>

<p align="center">
  <video width="640" height="360" controls loop muted>
    <source src="hardware/Videos/motors.mp4" type="video/mp4">
  </video>
</p>


<!-----------------------------------------------------------5. Testing Line Sensor-------------------------------------------------------------->

<center><h1>5. Testing Line Sensor</h1></center>

<b>Pin description :</b>

<p align="center">
  <img src="hardware/Images/lfs.jpg">
</p>

|Pin|Description|
|---|-----------|
|1|Left Sensor Data|
|2|Left Sensor Potentiometer|
|3|Center Sensor Data|
|4|Center Sensor Potentiometer|
|5|Right Sensor Data|
|6|Right Sensor Potentiometer|
|7-14|Not Connected|
|15|GND|
|16|GND|
|17|GND|
|18|Not Connected|
|19|3.3V|
|20|Not Connected|

<b>Connections :</b>

<p align="center">
  <img src="hardware/Images/lfs_con.png">
</p>

[Above image can be downloaded from <a href="./hardware/Images/lfs_con.png">here.</a>]

|Pin No.|Pin Name|Connection to De0-Nano|
|-------|--------|----------|
|1|Left Sensor Data|Analog_In0(2x13 Header Pin 24)|
|2|Left Sensor Potentiometer|Variable terminal of Potentiometer|
|3|Center Sensor Data|Analog_In1(2x13 Header Pin 25)|
|4|Center Sensor Potentiometer|Variable terminal of Potentiometer|
|5|Right Sensor Data|Analog_In2(2x13 Header Pin 22)|
|6|Right Sensor Potentiometer|Variable terminal of Potentiometer|
|7 to 14, 18 & 20|Not Connected|Not Connected|
|15|GND|GND|
|16|GND|GND|
|17|GND|GND|
|19|3.3V|3.3V|

<b>Calibration :</b>

<p align="center">
  <video width="640" height="360" controls loop muted>
    <source src="hardware/Videos/lfs_cal.mp4" type="video/mp4">
  </video>
</p>

<p align="justify" class="main">As shown in the above video, potentiometers are used to calibrate the sensor. Basically, potentiometers control the voltage to the RED LEDs thereby increasing or decreasing 
their intensity. Higher the voltage, brighter the LEDs, more is the sensitivity. Do note that these sensors are highly affected by ambient light therefore correctly calibrating them is very important.</p> 

<p align="justify" class="main">To test the Line Sensor, make connections as described above. Upload code and verify output.</p>

<b>Code files</b> can be downloaded from <a href="./hardware/Codes/5_Testing_Line_Sensor.zip">here.</a>

<b>Expected Output : </b>Check LEDs on De0-Nano board.

<p align="center">
  <video width="640" height="360" controls loop muted>
    <source src="hardware/Videos/lfs_op.mp4" type="video/mp4">
  </video>
</p>

<!-----------------------------------------------------------6. Testing Color Sensor-------------------------------------------------------------->

<center><h1>6. Testing Color Sensor</h1></center>

<p align="justify" class="main">To test color sensor provided, make connections as shown in the image below.</p>

<b>Connections :</b>

<p align="center">
  <img src="hardware/Images/color.jpg">
</p>

[Above image can be downloaded from <a href="./hardware/Images/color.jpg">here.</a>]

|Color Sensor Pins|Connection|RGB LED Pins|Connection|
|-----------------|----------|------------|----------|
|VCC              |3.3V      |Common Anode|3.3V <b>via Resistor</b>|
|GND              |GND       |R           |GPIO-0 Pin 36 (GPIO_029)|
|OE, S1, S3       |GND       |G           |GPIO-0 Pin 38 (GPIO_031)|
|S2, S0           |3.3V      |B           |GPIO-0 Pin 40 (GPIO_033)|
|OUT              |GPIO-0 Pin 34 (GPIO_027)|            ||


<p align="justify" class="main">Now upload the code and check the LED color after placing color patches on the sensor. It is mandatory to use color patches provided in previous task.</p>

<b>Code files</b> can be downloaded from <a href="./hardware/Codes/6_Testing_Color_Sensor.zip">here.</a>

<b>Expected Output : </b>Notice the color of RGB LED.

<p align="center">
  <video width="640" height="360" controls loop muted>
    <source src="hardware/Videos/color.mp4" type="video/mp4">
  </video>
</p>

<p align="justify" class="main">Do note that this sensor is very sensitive to ambient light. Hence your output may vary depending on lighting conditions.
If LED doesn't indicate correct color then the color patch can be moved away or towards the sensor to get correct output.</p>

> _**Note :** The connections to the De0-Nano mentioned are only relevant for this specific task and for the specific code provided. Teams can use any other connections for own implementation later._ 



## Video :

<ol>
<li><div align="justify" class="main">Make a single video to showcase the Hardware Testing using good quality camera. The resolution of the video should be good enough. You have to use a 5 Megapixel or higher camera
to shoot the video.</div></li>

<li><div align="justify" class="main">The video should demonstrate the working of all the provided components and if there is any fault in any of the component explain that in detail.</div></li>

<li><div align="justify" class="main">Please note while recording the video one team member should explain the problems in the hardware if any. Maximum time limit of video: 3-4minutes.</div></li>

<li><div align="justify" class="main">Upload the video on YouTube and provide the link on the portal under the <b>Robotic Kit</b> page on
portal. If there is any problem in the hardware then post your query on the Piazza mentioning
your Team ID and the fault in the hardware. No need to post the video link again on the Piazza.</div></li>

</ol>

> *__Note:__ If there no problem in the hardware and everything is working fine then no need to submit the video link on portal.*







